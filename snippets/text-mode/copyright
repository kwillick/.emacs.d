# -*- mode: snippet -*-
# name: copyright notice
# key: copyright
# --
`comment-start`${1:$(let ((width (+ (length (concat "Copyright (c) " (format-time-string "%Y") " "))
                                    (length text))))
                      (make-string width ?=))}
 `(let* ((filename (buffer-file-name))
             (name (if filename
                       (file-name-nondirectory filename)
                     (buffer-file-name))))
    (concat name "\n"))`
 Copyright (c) `(format-time-string "%Y")` ${1:`(user-full-name)`}
${1:$(let ((width (+ (length (concat "Copyright (c) " (format-time-string "%Y") " "))
                                    (length text))))
                      (make-string width ?=))}
`comment-end`
$0
`(when (= (length comment-end) 0)
   (save-excursion
     (re-search-backward (regexp-quote comment-start))
       (let ((beg (point)))
         (forward-line 4)
         (comment-region beg (point)))))`